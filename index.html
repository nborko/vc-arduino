<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">

  <title>Making Stuff with Arduino</title>

  <meta name="description" content="An introduction to making stuff with Arduino development tools">
  <meta name="author" content="Nicholas Borko">

  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <link rel="stylesheet" href="css/reveal.min.css">
  <link rel="stylesheet" href="css/theme/arduino.css" id="theme">

  <!-- For syntax highlighting -->
  <link rel="stylesheet" href="lib/css/zenburn.css">

  <!-- If the query includes 'print-pdf', use the PDF print sheet -->
  <script>
  document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
  </script>

  <!--[if lt IE 9]>
  <script src="lib/js/html5shiv.js"></script>
  <![endif]-->
</head>

<body>

  <div class="reveal">

    <!-- Any section element inside of this container is displayed as a slide -->
    <div class="slides">

      <section>
        <h1>Making Stuff with Arduino</h1>
        <p class="center">Nick Borko</p>
        <p class="center">May 11, 2013</p>
        <p class="center" style="text-size:smaller;">
          <img src="images/by-nc-sa.png" title="BY-NC-SA" alt="Creative Commons Logo for BY-NC-SA"><br>
          Except where otherwise noted, this work is licensed under<br>
          <a href="http://creativecommons.org/licenses/by-nc-sa/3.0" target="_blank">http://creativecommons.org/licenses/by-nc-sa/3.0</a>
        </p>
        <br>
        <h4><a href="#/25">Go Straight to the Project</a></h4>
      </section>

      <section>
        <h2>Agenda</h2>
        <ul>
          <li>Introduction</li>
          <li class="fragment fade-in">What is a microprocessor?</li>
          <li class="fragment fade-in">What's so great about the Arduino?
            <ul>
              <li>History of the Arduino</li>
              <li>Overview of the Arduino hardware</li>
              <li>Overview of the Arduino IDE</li>
              <li>Overview of Arduino programming</li>
            </ul></li>
            <li class="fragment fade-in">From Prototype to Gadget</li>
            <li class="fragment fade-in">Our Project: The Chiptune Player</li>
          </ul>
      </section>

      <section>
        <h2>What is a Microprocessor?</h2>
        <p>
          There are 5 basic functions units of a computer system:
          <ul>
            <li>Control Unit (CU)</li>
            <li>Arithmetic-Logical-Unit (ALU)</li>
            <li>Memory (ROM, RAM, Registers)</li>
            <li>Input</li>
            <li>Output</li>
          </ul>
        </p>
      </section>

      <section>
        <h2>What is a Microprocessor?</h2>
        <img src="images/cpu.png" title="Block Diagram of a Computer" alt="Block diagram of a computer">
      </section>

      <section>
        <h2>What is a Microprocessor?</h2>
        <ul>
          <li>The classical definition of a microprocessor is the combination
            of the Control Unit, Arithmetical-Logical-Unit and Registers in
            a single package, a.k.a. CPU</li>
          <li>Modern microprocessors also integrate input and output ports
            and on-chip memory (cache, EEPROM, flash, RAM)</li>
          <li>The Arduino is controlled by a microprocessor called the AVR</li>
        </ul>
      </section>
            
      <section>
        <h2>General Microprocessor<br>
          Architecture (8080, 6502)</h2>
        <img src="images/classic-cpu.png" title="Classic CPU Architecture Block Diagram" alt="Diagram of a classic CPU architecture">
      </section>

      <section>
        <h2>Atmel AVR Architecture</h2>
        <div style="position:fixed;top:600px;left:150px;">&copy; Atmel Corporation</div>
        <img src="images/avr.png" height="600" title="Atmel AVR Architecture Block Diagram" alt="Diagram of Atmel AVR architecture">
      </section>

      <section>
        <h2>What's so great about the Arduino?</h2>
        <p>
          Arduino isn't just hardware, it's a complete development
          environment:
          <ul>
            <li>An open-source electronics prototyping platform based on
              inexpensive hardware</li>
            <li>A free, easy to use software integrated development
              environment (IDE)</li>
            <li>A familiar programming language based on Processing
              and C/C++</li>
            <li>An active, diverse, inclusive development community</li>
          </ul>
        </p>
      </section>

      <section>
        <h2>History of the Arduino</h2>
        <ul>
          <li>Developed by Massimo Banzi and David Cuartielles at the
            Interaction Design Institute Ivrea, Italy in 2005
            <ul>
              <li>Designed to be an inexpensive prototyping system for
                student interactive design projects</li>
              <li>Built upon the Wiring Platform, by Hernando Barragán,
                based on the AVR and Processing</li>
            </ul>
          </li>
          <li>See the full length documentary video at
            <a href="http://vimeo.com/18539129">http://vimeo.com/18539129</a></li>
        </ul>
      </section>

      <section>
        <h2>Arduino Hardware Overview</h2>
        <ul>
          <li>Based on the Atmel Atmega168/328[P], an 8-bit AVR running on
            5V at 16MHz</li>
          <li>Programmed with a bootloader to bootstrap loading programs
            from USB</li>
          <li>Microprocessor pins are broken out to headers in a standard
            configuration</li>
          <li>Additional “shield” boards can be “stacked” on the headers for
            extended functionality</li>
        </ul>
      </section>

      <section>
        <h2>Arduino UNO R3 (~$30)</h2>
        <img src="images/uno.png" title="Arduino Uno R3" alt="Picture of the Arduino Uno R3 highlighting different components">
      </section>

      <section>
        <h2>Arduino IDE Overview</h2>
        <ul>
          <li>The Arduino IDE (Integrated Development Environment) is all you
            need to develop programs for the Arduino</li>
          <li>Written in Java, based on the Wiring IDE</li>
          <li>Runs on Windows, OSX and Linux</li>
          <li>Automates the entire AVR development toolchain: editor,
           compiler/linker (avrgcc), uploader (avrdude), terminal emulator,
            and more</li>
        </ul>
      </section>

      <section>
        <h2>Arduino IDE (1.0.4)</h2>
        <img src="images/arduino-ide.png" title="The Arduino IDE" alt="Screenshot of the Arduino IDE">
      </section>

      <section>
        <h2>Arduino Programming Overview</h2>
        <ul>
          <li>The Arduino programming language is actually C++, written on
            top of the Arduino Core</li>
          <li>A programmer doesn't have to know how to write C++ programs,
            only the conventions for writing Arduino programs</li>
          <li>The Arduino IDE takes care of compiling, linking and uploading
            the program, so you don't have to know how to use any of
            those tools</li>
        </ul>
      </section>

      <section>
        <h2>What is the Arduino Core?</h2>
        <ul>
          <li>The Arduino Core provides the main entry function, data types,
            and high level functions to program the AVR</li>
          <li>It is a library that abstracts low level microprocessor
            programming concepts into high level function calls</li>
          <li>It is based on Processing, a language designed to teach
            programming in a visual context to non-programmers</li>
        </ul>
      </section>

      <section>
        <h2>What is the Arduino Core?</h2>
        <ul>
          <li>The Arduino Core assigns a set of standard numbers to the
            generic I/O pins of the microprocessor for use in programs</li>
          <li>The Arduino Core is automatically included in and linked to
            your Arduino programs</li>
          <li>You can extend the Arduino Core with regular C and C++
            libraries</li>
        </ul>
      </section>

      <section>
        <h2>What is the Arduino Core?</h2>
        A basic AVR program to blink a LED (in C):
        <pre style="font-size:16px;"><code>// http://hackaday.com/2010/10/25/avr-programming-02-the-hardware/
#include &lt;avr/io.h&gt;
#include &lt;avr/interrupt.h&gt;

int main(void) {
  //Setup the clock
  cli();               //Disable global interrupts
  TCCR1B |= 1&lt;&lt;CS11 | 1&lt;&lt;CS10; //Divide by 64
  OCR1A = 15624;       //Count 15624 cycles for 1 second interrupt
  TCCR1B |= 1&lt;&lt;WGM12;  //Put Timer/Counter1 in CTC mode
  TIMSK1 |= 1&lt;&lt;OCIE1A; //enable timer compare interrupt
  sei();               //Enable global interrupts

  DDRD |= (1&lt;&lt;0);      //Set PortD Pin0 as an output
  PORTD |= (1&lt;&lt;0);     //Set PortD Pin0 high to turn on LED

  while(1) { }         //Loop forever, interrupts do the rest
}

//Interrupt Service Routine
ISR(TIMER1_COMPA_vect) {
  PORTD ^= (1&lt;&lt;0);     //Use xor to toggle the LED
}</code></pre>
      </section>

      <section>
        <h2>What is the Arduino Core?</h2>
        A basic Arduino program to blink a LED:
        <pre><code>void setup() {
  // initialize the digital pin as an output.
  // Pin 13 has an LED connected on most Arduino boards:
  pinMode(13, OUTPUT);
}
void loop() {
  digitalWrite(13, HIGH); // set the LED on
  delay(1000);            // wait for a second
  digitalWrite(13, LOW);  // set the LED off
  delay(1000);            // wait for a second
}</code></pre>
      </section>

      <section>
        <h2>Advantages of the Arduino Core</h2>
        <ul>
          <li>You don't have to write boilerplate code usually required for
            microprocessor programming</li>
          <li>Interaction with microprocessor functions is done through
            high level function calls rather than looking up bits to set in
            registers from a data sheet</li>
          <li>Code is readable and understandable by humans, even by
            non-programmers</li>
        </ul>
      </section>

      <section>
        <h2>From Prototype to Gadget</h2>
        <ol>
          <li class="fragment fade-in">Create a sketch &amp; circuit for the
            Arduino.</li>
          <li class="fragment fade-in">Pick a compatible part (AVR) with the
            correct number of input/output pins and size, voltage, clock, etc.
            requirements.</li>
          <li class="fragment fade-in">Modify sketch and input/output
            hardware to match capabilities of microprocessor.</li>
          <li class="fragment fade-in">Test, refine, test...
            and test and test!</li>
          <li class="fragment fade-in">Design your final board &mdash;
            pre-printed breadboard, etch your own, board service, or
            deadbug!</li>
        </ol>
      </section>

      <section>
        <h2>From Prototype to Gadget</h2>
        <h3>Create a sketch &amp; circuit for the Arduino</h3>
        <ul>
          <li>Chiptune player started as an idea to create a "fuzz organ"</li>
          <li>See bach_multitone sketch on github:<br>
            <a href="https://github.com/nborko/vc-arduino/blob/master/bach_multitone/bach_multitone.ino" target="_blank">https://github.com/nborko/vc-arduino/blob/master/bach_multitone/bach_multitone.ino</a></li>
        </ul>
      </section>

      <section>
        <h2>From Prototype to Gadget</h2>
        <h3>Pick a compatible part (AVR)</h3>
        <ul>
          <li>The chiptune player needs 2 output pins for sound and 1 for
            arpeggio control</li>
          <li>Need at least 4k of flash (for program), at least 256 bytes of
           RAM (main memory)</li>
          <li>The ATtinyx5 series has 5 input/output pins, can run up to 20MHz</li>
          <li>We picked the ATtiny85 (8k flash, 512 bytes RAM, internal 8MHz clock)</li>
        </ul>
      </section>

      <section>
        <h2>From Prototype to Gadget</h2>
        <h3>Modify Sketch and Hardare for Microprocessor</h3>
        <ul>
          <li>Internal timers work differently, so a custom timer interrupt
            had to be used</li>
          <li>Clock is slower (8MHz vs. 16MHz), so tone generation and note
            timing functions had to be modified</li>
          <li>Desgn goals vs. compromises:
            <ul>
              <li>E.g., using the internal clock minimizes parts, but speed
                will slightly differ from part to part</li>
            </ul>
          </li>
        </ul>
      </section>

      <section>
        <h2>From Prototype to Gadget</h2>
        <h3>Test, refine, test... (ad nauseam)</h3>
        <ul>
          <li>Always test your design on a breadboard &mdash; use real parts!</li>
          <li>If using SMD parts, use breakout boards.  In the long run it will
            save you time and $$</li>
          <li>Don't buy just one set of parts for prototype/testing, have 3-5
            sets on hand, more if a part is easily lost, broken, burned,
            bricked...</li>
          <li>It's OK to go back to the drawing board if things aren't working
            out</li>
          <li>Always expect the unexpected!</li>
        </ul>
      </section>

      <section>
        <h2>From Prototype to Gadget</h2>
        <h3>Design Your Final Board</h3>
        <ul>
          <li>Keep in mind issues like utility, size, longevity</li>
          <li>Ugly but functional is better than pretty but disposable</li>
          <li>Design services are nice and getting cheaper, but pre-printed
            breadboards are cheap and available</li>
          <li>Don't be afraid to try something different!</li>
        </ul>
      </section>

      <section>
        <h2>Our Project: A Chiptune Player</h2>
        <ul>
          <li>Plays synthesized 8-bit music</li>
          <li>Prototyped on a standard Arduino Uno</li>
          <li>Built to spec using an ATtiny85</li>
        </ul>
        <img src="images/project.jpg" title="The Chiptune Player" alt="Picture of the Chiptune Player">
      </section>

      <section>
        <h2>Chiptune Player Schematic</h2>
        <img src="images/schematic.png" title="Chiptune Player Schematic" alt="Chiptune Player Schematic">
      </section>

      <section>
        <h2>Chiptune Player Code</h2>
        <ul>
          <li>Code can be found on github:<br>
            <a href="https://github.com/nborko/vc-arduino" target="_blank">https://github.com/nborko/vc-arduino</a>
          </li>
          <li>Warning: Code is more AVR than Arduino, but the Arduino core
            is still being used</li>
        </ul>
      </section>

      <section>
        <h2>The Microprocessor</h2>
        <h3>Atmel ATtiny85 AVR</h3>
        <img src="images/ATtiny85.jpg" title="The ATtiny85" alt="Picture of the ATtiny85">
      </section>

      <section>
        <h2>The Parts</h2>
        <img src="images/parts.jpg" title="The Parts" alt="Picture of the parts">
      </section>

      <section>
        <h2>Soldering Is Easy</h2>
        <ul>
          <li>This project requires soldering</li>
          <li>Don't worry, soldering is easy!</li>
          <li><a href="http://mightyohm.com/files/soldercomic/FullSolderComic_EN.pdf" target="_blank">http://mightyohm.com/files/soldercomic/FullSolderComic_EN.pdf</a></li>
        </ul>
      </section>

      <section>
        <h2>The Build</h2>
        Step 1: The (Almost) Empty Board<br><br>
        <img src="images/empty-board.jpg" title="The Empty Board" alt="Picure of the empty board">
      </section>

      <section>
        <h2>The Build</h2>
        Step 2: The Jumpers (Wires)<br><br>
        <img src="images/board-wiring.jpg" title="Adding Jumpers" alt="Picure of jumper placement on board">
      </section>

      <section>
        <h2>The Build</h2>
        Step 3: The Piezo<br><br>
        <img src="images/board-piezo.jpg" title="Adding the Piezo" alt="Picure of piezo placement on board">
      </section>

      <section>
        <h2>The Build</h2>
        Step 4: The Push Button<br><br>
        <img src="images/board-pb.jpg" title="Adding the Push Button" alt="Picure of push button placement on board">
      </section>

      <section>
        <h2>The Build</h2>
        Step 5: The Potentiometer<br><br>
        <img src="images/board-pot.jpg" title="Adding the Potentiometer" alt="Picure of potentiometer placement on board">
      </section>

      <section>
        <h2>The Build</h2>
        Step 6: The Regulator<br><br>
        <img src="images/board-reg.jpg" title="Adding the Regulator" alt="Picure of regulator placement on board">
      </section>

      <section>
        <h2>The Build</h2>
        Step 7: The Battery Snap<br><br>
        <img src="images/board-battery.jpg" title="Adding the Battery Snap" alt="Picure of battery snap placement on board">
      </section>

      <section>
        <h2>The Build</h2>
        <p>Some helpful hints:</p>
        <ul>
          <li>Bend wire and part leads out to hold them in place.</li>
          <li>Solder lower profile parts first, bigger parts last.</li>
          <li>Use clamps, clothespins or even gravity to help hold the parts
            close to the board before soldering.</li>
          <li>Run the battery snap leads from the bottom of the board up
            through the corner hole and back down on the board again.  This
            will help relieve tension on the solder joint.</li>
          <li>Have fun!</li>
        </ul>
      </section>

      <section>
        <p class="center">
          This presentation is available online at:<br>
          <a href="http://nborko.github.io/vc-arduino/">http://nborko.github.io/vc-arduino/</a>
        </p>
        <p class="center">
          All source files used for this workshop are available online at:<br>
          <a href="https://github.com/nborko/vc-arduino">https://github.com/nborko/vc-arduino</a>
        </p>
      </section>

    </div>

    <div class="footer">
      <img src="images/by-nc-sa-small.png" height="50" style="position:fixed;left:25px;" title="BY-NC-SA" alt="Creative Commons Logo for BY-NC-SA">
      <b>Making Stuff with Arduino</b><br>
      Presented by Nicholas Borko
    </div>

  </div>

  <script src="lib/js/head.min.js"></script>
  <script src="js/reveal.min.js"></script>

  <script>
    Reveal.initialize({
      width: 1024,
      height: 768,
      controls: true,
      progress: true,
      history: true,
      center: true,
      //theme: 'arduino',
      transition: 'cube', // default/cube/page/concave/zoom/linear/fade/none
      dependencies: [
        { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
        { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad() } },
        { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
        { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
      ]
    });
  </script>

</body>
</html>
